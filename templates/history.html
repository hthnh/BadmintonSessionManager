<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>L·ªãch s·ª≠ tr·∫≠n ƒë·∫•u - BSM</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        .history-grid-container {
            display: grid;
            grid-template-columns: 1fr; /* M·ªôt c·ªôt duy nh·∫•t */
            gap: 1.5rem;
        }
        .history-card {
            background-color: var(--color-surface);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            border-left: 5px solid var(--color-secondary);
        }
        .history-card.winner-A { border-left-color: #198754; /* M√†u xanh l√° */ }
        .history-card.winner-B { border-left-color: #0d6efd; /* M√†u xanh d∆∞∆°ng */ }

        .history-card__header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--color-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .history-card__header h3 { margin: 0; }
        .history-card__header span { color: var(--color-secondary); }

        .history-card__body {
            display: flex;
            justify-content: space-around;
            padding: 1.5rem;
            align-items: center;
        }
        .team-details { width: 45%; }
        .team-details h4 {
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--color-border);
        }
        .team-details.winner h4 {
            font-weight: 700;
            color: var(--color-primary);
        }
        .player-elo-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }
        .elo-change { font-weight: 700; }
        .elo-change.positive { color: #198754; }
        .elo-change.negative { color: #dc3545; }
        .vs-separator { font-size: 2rem; font-weight: 700; color: var(--color-border); }

        .vs-separator {
            font-size: 1.5rem; /* Gi·∫£m k√≠ch th∆∞·ªõc ch·ªØ VS */
            font-weight: 700;
            color: var(--color-border);
            display: flex;
            flex-direction: column; /* Hi·ªÉn th·ªã ƒëi·ªÉm s·ªë b√™n d∆∞·ªõi ch·ªØ VS */
            align-items: center;
            gap: 0.5rem;
        }

        /* [TH√äM M·ªöI] Style cho ƒëi·ªÉm s·ªë */
        .score-display {
            font-size: 2rem;
            font-weight: 700;
            color: var(--color-dark);
            background-color: #e9ecef;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
        }

        /* Th√™m v√†o th·∫ª <style> trong templates/history.html */

/* CSS cho Modal (sao ch√©p t·ª´ players.html) */
.modal {
    display: none; position: fixed; z-index: 1000;
    left: 0; top: 0; width: 100%; height: 100%;
    overflow: auto; background-color: rgba(0,0,0,0.6);
    padding-top: 60px;
}
.modal-content {
    background-color: #fefefe; margin: 5% auto; padding: 20px;
    border: 1px solid #888; width: 80%; max-width: 700px;
    border-radius: var(--border-radius);
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    animation-name: animatetop; animation-duration: 0.4s;
}
@keyframes animatetop {
    from {top: -300px; opacity: 0} to {top: 0; opacity: 1}
}
.modal-header {
    padding: 2px 16px; border-bottom: 1px solid var(--color-border);
    display: flex; justify-content: space-between; align-items: center;
}
.modal-header h2 { color: var(--color-primary); }
.close-btn { color: #aaa; font-size: 28px; font-weight: bold; cursor: pointer; }
.close-btn:hover, .close-btn:focus { color: black; }
.modal-body {
    padding: 1.5rem 1rem; display: grid;
    grid-template-columns: 1fr 1fr; gap: 1rem 2rem;
}
.info-field { padding-bottom: 10px; }
.info-field label { color: var(--color-secondary); font-weight: 500; display: block; font-size: 0.9rem; }
.info-field span { font-size: 1.1rem; font-weight: 700; }

/* [M·ªöI] CSS ƒë·ªÉ bi·∫øn t√™n ng∆∞·ªùi ch∆°i th√†nh link */
.player-name-link {
    cursor: pointer;
    font-weight: 700;
}
.player-name-link:hover {
    text-decoration: underline;
    color: var(--color-primary);
}
.elo-timeline {
    font-size: 0.9rem;
    color: var(--color-secondary);
    margin-left: 0.5rem;
}
    </style>
</head>
<body>
    <div class="page-container">
        <aside class="sidebar">
            <div class="sidebar__header"><h4>üè∏ <span class="sidebar__logo-text">Navigator</span></h4></div>
            <nav class="sidebar__nav">
                <a href="/" class="nav-item"><span class="nav-item__icon">üìä</span><span class="nav-item__text">Dashboard</span></a>
                <a href="/manage-players" class="nav-item"><span class="nav-item__icon">‚úÖ</span><span class="nav-item__text">Player Manage</span></a>
                <a href="/manage-courts" class="nav-item"><span class="nav-item__icon">üèüÔ∏è</span><span class="nav-item__text">Courts Manage</span></a>
                <a href="/history" class="nav-item active"><span class="nav-item__icon">üìÑ</span><span class="nav-item__text">History</span></a>
                <a href="/settings" class="nav-item"><span class="nav-item__icon">‚öôÔ∏è</span><span class="nav-item__text">Settings</span></a>
            </nav>
            <div class="sidebar__footer"><div id="clock" class="clock">ƒêang t·∫£i...</div></div>
        </aside>

        <main class="main-content">
            <header class="main-content__header">
                <h1>L·ªãch s·ª≠ & B√°o c√°o</h1>
            </header>
            <div id="history-list-container" class="main-grid-container history-grid-container">
                </div>
        </main>
    </div>

    <div id="player-detail-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modal-player-name">Chi ti·∫øt ng∆∞·ªùi ch∆°i</h2>
            <span class="close-btn">&times;</span>
        </div>
        <div class="modal-body">
            <div class="info-field"><label>ID</label><span id="detail-id"></span></div>
            <div class="info-field"><label>T√™n</label><span id="detail-name"></span></div>
            <div class="info-field"><label>Ng√†y tham gia</label><span id="detail-join_date"></span></div>
            <div class="info-field"><label>Lo·∫°i h√¨nh</label><span id="detail-type"></span></div>
            <div class="info-field"><label>Gi·ªõi t√≠nh</label><span id="detail-gender"></span></div>
            <div class="info-field"><label>S·ªë ƒëi·ªán tho·∫°i</label><span id="detail-contact_info"></span></div>
            <div class="info-field"><label>Tr·∫°ng th√°i</label><span id="detail-is_active"></span></div>
            <hr style="grid-column: 1 / -1;">
            <div class="info-field"><label>ELO</label><span id="detail-elo_rating"></span></div>
            <div class="info-field"><label>H·ªá s·ªë K</label><span id="detail-k_factor"></span></div>
            <div class="info-field"><label>H·∫°ng</label><span id="detail-rank_tier"></span></div>
            <div class="info-field"><label>S·ªë tr·∫≠n "th·ª≠ vi·ªác"</label><span id="detail-provisional_games_left"></span></div>
            <hr style="grid-column: 1 / -1;">
            <div class="info-field"><label>T·ªïng s·ªë tr·∫≠n</label><span id="detail-total_matches_played"></span></div>
            <div class="info-field"><label>T·ªïng s·ªë tr·∫≠n th·∫Øng</label><span id="detail-total_wins"></span></div>
            <div class="info-field"><label>T·ª∑ l·ªá th·∫Øng</label><span id="detail-win_rate"></span></div>
            <div class="info-field"><label>Chu·ªói th·∫Øng hi·ªán t·∫°i</label><span id="detail-current_win_streak"></span></div>
            <div class="info-field"><label>Chu·ªói th·∫Øng d√†i nh·∫•t</label><span id="detail-longest_win_streak"></span></div>
            <div class="info-field"><label>L·∫ßn ch∆°i cu·ªëi</label><span id="detail-last_played_date"></span></div>
            <div class="info-field"><label>S·ªë bu·ªïi ƒë√£ tham gia</label><span id="detail-total_sessions_attended"></span></div>
        </div>
    </div>
</div>



    <script src="{{ url_for('static', filename='app.js') }}" type="module"></script>
</body>
</html>